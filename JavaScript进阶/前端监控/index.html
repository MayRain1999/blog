<!doctype html>
<html class="docs-version-current" lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-beta.15">
<title data-react-helmet="true">å‰ç«¯é”™è¯¯ç›‘æ§ | FE-Study</title><meta data-react-helmet="true" name="twitter:card" content="summary_large_image"><meta data-react-helmet="true" property="og:url" content="https://www.fe-study.tech/JavaScriptè¿›é˜¶/å‰ç«¯ç›‘æ§"><meta data-react-helmet="true" name="docusaurus_locale" content="en"><meta data-react-helmet="true" name="docusaurus_version" content="current"><meta data-react-helmet="true" name="docusaurus_tag" content="docs-default-current"><meta data-react-helmet="true" property="og:title" content="å‰ç«¯é”™è¯¯ç›‘æ§ | FE-Study"><meta data-react-helmet="true" name="description" content="why"><meta data-react-helmet="true" property="og:description" content="why"><link data-react-helmet="true" rel="icon" href="/img/favicon.ico"><link data-react-helmet="true" rel="canonical" href="https://www.fe-study.tech/JavaScriptè¿›é˜¶/å‰ç«¯ç›‘æ§"><link data-react-helmet="true" rel="alternate" href="https://www.fe-study.tech/JavaScriptè¿›é˜¶/å‰ç«¯ç›‘æ§" hreflang="en"><link data-react-helmet="true" rel="alternate" href="https://www.fe-study.tech/JavaScriptè¿›é˜¶/å‰ç«¯ç›‘æ§" hreflang="x-default"><link rel="stylesheet" href="/assets/css/styles.46a3b292.css">
<link rel="preload" href="/assets/js/runtime~main.1b1c4256.js" as="script">
<link rel="preload" href="/assets/js/main.621f5716.js" as="script">
</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div role="region"><a href="#" class="skipToContent_ZgBM">Skip to main content</a></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle clean-btn" type="button" tabindex="0"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/logo.svg" alt="å‰ç«¯å­¦ä¹ " class="themedImage_W2Cr themedImage--light_TfLj"><img src="/img/logo.svg" alt="å‰ç«¯å­¦ä¹ " class="themedImage_W2Cr themedImage--dark_oUvU"></div><b class="navbar__title">å‰ç«¯å­¦ä¹ </b></a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/facebook/docusaurus" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link"><span>GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_I5OW"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a><div class="toggle_Pssr toggle_TdHA toggleDisabled_jDku"><div class="toggleTrack_SSoT" role="button" tabindex="-1"><div class="toggleTrackCheck_XobZ"><span class="toggleIcon_eZtF">ğŸŒœ</span></div><div class="toggleTrackX_YkSC"><span class="toggleIcon_eZtF">ğŸŒ</span></div><div class="toggleTrackThumb_uRm4"></div></div><input type="checkbox" class="toggleScreenReader_JnkT" aria-label="Switch between dark and light mode"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div class="main-wrapper docs-wrapper docs-doc-page"><div class="docPage_P2Lg"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_RiI4" type="button"></button><aside class="theme-doc-sidebar-container docSidebarContainer_rKC_"><div class="sidebar_CW9Y"><nav class="menu thin-scrollbar menu_SkdO"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/">å‰ç«¯å­¦ä¹ </a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist hasHref_VCh3" href="/JavaScriptæ•°æ®ç»“æ„/å•å‘é“¾è¡¨">JavaScriptæ•°æ®ç»“æ„</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active hasHref_VCh3" aria-current="page" href="/JavaScriptè¿›é˜¶/ç»§æ‰¿">JavaScriptè¿›é˜¶</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/JavaScriptè¿›é˜¶/ç»§æ‰¿">JavaScript ç»§æ‰¿</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/JavaScriptè¿›é˜¶/ç†è§£åŸå‹">ç†è§£åŸå‹&amp;åŸå‹é“¾</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/JavaScriptè¿›é˜¶/äº‹ä»¶å¾ªç¯">JS äº‹ä»¶å¾ªç¯</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/JavaScriptè¿›é˜¶/å˜é‡æå‡">å˜é‡æå‡</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/JavaScriptè¿›é˜¶/ä¸¥æ ¼æ¨¡å¼">ä¸¥æ ¼æ¨¡å¼</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/JavaScriptè¿›é˜¶/åˆ›å»ºå¯¹è±¡">åˆ›å»ºå¯¹è±¡</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/JavaScriptè¿›é˜¶/æ²™ç®±">JS æ²™ç®±</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/JavaScriptè¿›é˜¶/æ¨¡å—åŒ–ç¼–ç¨‹">æ¨¡å—åŒ–ç¼–ç¨‹</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/JavaScriptè¿›é˜¶/å¼‚æ­¥">JavaScript å¼‚æ­¥</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/JavaScriptè¿›é˜¶/Arguments">Arguments å¯¹è±¡</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/JavaScriptè¿›é˜¶/Promise">Promise &amp; async/await ä½¿ç”¨</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/JavaScriptè¿›é˜¶/å‰ç«¯ç›‘æ§">å‰ç«¯é”™è¯¯ç›‘æ§</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/JavaScriptè¿›é˜¶/çº¯å‡½æ•°">å‡½æ•°å¼ç¼–ç¨‹</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/JavaScriptè¿›é˜¶/touchäº‹ä»¶">ç§»åŠ¨ç«¯ touch äº‹ä»¶</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/JavaScriptè¿›é˜¶/è®¾è®¡æ¨¡å¼">è®¾è®¡æ¨¡å¼</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/JavaScriptè¿›é˜¶/ç®­å¤´å‡½æ•°">ç®­å¤´å‡½æ•°</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/JavaScriptè¿›é˜¶/æ–æ³¢é‚£å¥‘çº¦æ•°">æ–æ³¢é‚£å¥‘çº¦æ•°è§£æ³•</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/JavaScriptè¿›é˜¶/é¢å‘å¯¹è±¡ç¼–ç¨‹">é¢å‘å¯¹è±¡ç¼–ç¨‹</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/JavaScriptè¿›é˜¶/jså›¾ç‰‡å‹ç¼©">JS å›¾ç‰‡å‹ç¼©</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/JavaScriptè¿›é˜¶/å¤§å°æ¯”è¾ƒ">JS å…³ç³»è¿ç®—ç¬¦</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/JavaScriptè¿›é˜¶/å­—ç¬¦ä¸²è½¬æ•°å­—">JS å­—ç¬¦ä¸²è½¬æ•°å­—</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist hasHref_VCh3" href="/DOM/äº‹ä»¶æœºåˆ¶">DOM</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist hasHref_VCh3" href="/CSS/CSSé•¿åº¦å•ä½">CSS</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist hasHref_VCh3" href="/æµè§ˆå™¨/storge">æµè§ˆå™¨</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist hasHref_VCh3" href="/æ¡†æ¶/storge">æ¡†æ¶</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist hasHref_VCh3" href="/webpack/loaderå’ŒpluginåŒºåˆ«">webpack</a></div></li></ul></nav></div></aside><main class="docMainContainer_TCnq"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_DM6M"><div class="docItemContainer_vinB"><article><div class="tocCollapsible_jdIR theme-doc-toc-mobile tocMobile_TmEX"><button type="button" class="clean-btn tocCollapsibleButton_Fzxq">On this page</button></div><div class="theme-doc-markdown markdown"><h1>å‰ç«¯é”™è¯¯ç›‘æ§</h1><h2 class="anchor anchorWithStickyNavbar_mojV" id="why">why<a class="hash-link" href="#why" title="Direct link to heading">â€‹</a></h2><p>å‰ç«¯ä¸ç®¡æ€ä¹ˆå˜åŒ–ï¼Œå§‹ç»ˆæ˜¯ç›´æ¥é¢å‘ç”¨æˆ·</p><ul><li>å¢å¼ºç”¨æˆ·ä½“éªŒï¼›</li><li>è¿œç¨‹å®šä½é—®é¢˜ï¼›</li><li>æœªé›¨ç»¸ç¼ªï¼ŒåŠæ—©å‘ç°é—®é¢˜ï¼›</li><li>æ— æ³•å¤ç°é—®é¢˜ï¼Œå°¤å…¶æ˜¯ç§»åŠ¨ç«¯ï¼Œæœºå‹ï¼Œç³»ç»Ÿéƒ½æ˜¯é—®é¢˜ï¼›</li><li>å®Œå–„çš„å‰ç«¯æ–¹æ¡ˆï¼Œå‰ç«¯ç›‘æ§ç³»ç»Ÿï¼›</li></ul><p>å¯¹äº <code>JS</code> è€Œè¨€ï¼Œå¼‚å¸¸çš„å‡ºç°ä¸ä¼šç›´æ¥å¯¼è‡´ <code>JS</code> å¼•æ“å´©æºƒï¼Œæœ€å¤šåªä¼šä½¿å½“å‰æ‰§è¡Œçš„ä»»åŠ¡ç»ˆæ­¢ã€‚</p><h2 class="anchor anchorWithStickyNavbar_mojV" id="å¼‚å¸¸">å¼‚å¸¸<a class="hash-link" href="#å¼‚å¸¸" title="Direct link to heading">â€‹</a></h2><ul><li>JS è¯­æ³•é”™è¯¯ã€ä»£ç å¼‚å¸¸</li><li>AJAX è¯·æ±‚å¼‚å¸¸</li><li>é™æ€èµ„æºåŠ è½½å¼‚å¸¸</li><li>Promise å¼‚å¸¸</li><li>Iframe å¼‚å¸¸</li><li>è·¨åŸŸ Script error</li><li>å´©æºƒå’Œå¡é¡¿</li></ul><p>å‘ç”Ÿæ—¶é—´å¤§è‡´åˆ¤æ–­</p><ul><li><p>DNS æŸ¥è¯¢è€—æ—¶ ï¼šdomainLookupEnd - domainLookupStart</p></li><li><p>TCP é“¾æ¥è€—æ—¶ ï¼šconnectEnd - connectStart</p></li><li><p>request è¯·æ±‚è€—æ—¶ ï¼šresponseEnd - responseStart</p></li><li><p>è§£æ dom æ ‘è€—æ—¶ ï¼š domComplete - domInteractive</p></li><li><p>ç™½å±æ—¶é—´ ï¼šresponseStart - navigationStart</p></li><li><p>domready æ—¶é—´ ï¼šdomContentLoadedEventEnd - navigationStart</p></li><li><p>onload æ—¶é—´ ï¼šloadEventEnd â€“ navigationStart</p></li><li><p>åœ¨ head æ ‡ç­¾è§£æåï¼Œæ¸²æŸ“ body æ ‡ç­¾å‰åŠ å…¥ script æ ‡ç­¾è¿›è¡Œæ‰“ç‚¹ï¼Œä¸€èˆ¬å°†è¿™ä¸ªæ—¶é—´è§†ä¸ºç™½å±æ—¶é—´</p></li><li><p>æ•è· DOMContentLoaded äº‹ä»¶æ¥è®°å½• dom å…ƒç´ åŠ è½½å®Œæ¯•çš„æ—¶é—´</p></li><li><p>åœ¨é¦–å±é¡µé¢çš„æ‰€æœ‰å›¾ç‰‡åŠ è½½å®Œåè¿›è¡Œè®°å½•ï¼Œä¿å­˜é¦–å±æ—¶é—´</p></li><li><p>æ•è· load äº‹ä»¶è®°å½•é¡µé¢åŠ è½½å®Œæˆçš„æ—¶é—´</p></li></ul><h2 class="anchor anchorWithStickyNavbar_mojV" id="é”™è¯¯æœé›†">é”™è¯¯æœé›†<a class="hash-link" href="#é”™è¯¯æœé›†" title="Direct link to heading">â€‹</a></h2><h3 class="anchor anchorWithStickyNavbar_mojV" id="windowonerror">window.onerror<a class="hash-link" href="#windowonerror" title="Direct link to heading">â€‹</a></h3><p>å½“ <code>JavaScript</code> è¿è¡Œæ—¶é”™è¯¯ï¼ˆåŒ…æ‹¬è¯­æ³•é”™è¯¯ï¼‰å‘ç”Ÿæ—¶ï¼Œ<code>window</code> ä¼šè§¦å‘ä¸€ä¸ª <code>ErrorEvent</code> æ¥å£çš„ <code>error</code> äº‹ä»¶ï¼Œå¹¶æ‰§è¡Œ <code>window.onerror()</code>ã€‚</p><p><code>window.onerror</code> å¯ä»¥æ•æ‰è¿è¡Œæ—¶é”™è¯¯ï¼Œå¯ä»¥æ‹¿åˆ°å‡ºé”™çš„ä¿¡æ¯ï¼Œå †æ ˆï¼Œå‡ºé”™çš„æ–‡ä»¶ã€è¡Œå·ã€åˆ—å·</p><p>è¦æ³¨æ„ä»¥ä¸‹å‡ ç‚¹ï¼š</p><ul><li><p>è¦æŠŠ <code>window.onerror</code> è¿™ä¸ªä»£ç å—åˆ†ç¦»å‡ºå»ï¼Œå¹¶ä¸”æ¯”å…¶ä»–è„šæœ¬å…ˆæ‰§è¡Œï¼ˆæ³¨æ„è¿™ä¸ªå‰æï¼ï¼‰å³å¯æ•æ‰åˆ°è¯­æ³•é”™è¯¯ã€‚</p></li><li><p>ç”±äºç½‘ç»œè¯·æ±‚å¼‚å¸¸äº‹ä»¶ä¸ä¼šå†’æ³¡ï¼Œéœ€è¦åœ¨æ•è·é˜¶æ®µè¿›è¡Œå¤„ç†</p></li><li><p>ä¸èƒ½æ•è· <code>promise</code> çš„é”™è¯¯ä¿¡æ¯</p></li><li><p>è·¨åŸŸèµ„æºéœ€è¦ä¸“é—¨å¤„ç†ï¼Œéœ€è¦åœ¨ <code>script</code> æ ‡ç­¾åŠ ä¸Š <code>crossorigin</code> å±æ€§ï¼ŒæœåŠ¡å™¨è®¾ç½® <code>Access-Control-Allow-Origin</code></p></li><li><p><code>window.onerror</code> å‡½æ•°åªæœ‰åœ¨è¿”å› <code>true</code> çš„æ—¶å€™ï¼Œå¼‚å¸¸æ‰ä¸ä¼šå‘ä¸ŠæŠ›å‡ºï¼Œå¦åˆ™å³ä½¿æ˜¯çŸ¥é“å¼‚å¸¸çš„å‘ç”Ÿæ§åˆ¶å°è¿˜æ˜¯ä¼šæ˜¾ç¤º <code>Uncaught Error: xxxxxã€‚</code></p></li></ul><div class="codeBlockContainer_I0IT language-js theme-code-block"><div class="codeBlockContent_wNvx js"><pre tabindex="0" class="prism-code language-js codeBlock_jd64 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token dom variable" style="color:#36acaa">window</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method-variable function-variable method function property-access" style="color:#d73a49">onerror</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">function</span><span class="token punctuation" style="color:#393A34">(</span><span class="token parameter">message</span><span class="token parameter punctuation" style="color:#393A34">,</span><span class="token parameter"> source</span><span class="token parameter punctuation" style="color:#393A34">,</span><span class="token parameter"> lineno</span><span class="token parameter punctuation" style="color:#393A34">,</span><span class="token parameter"> colno</span><span class="token parameter punctuation" style="color:#393A34">,</span><span class="token parameter"> error</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> </span><span class="token spread operator" style="color:#393A34">...</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div><ul><li>messageï¼šé”™è¯¯ä¿¡æ¯ï¼ˆå­—ç¬¦ä¸²ï¼‰ã€‚å¯ç”¨äº HTML onerror=&quot;&quot;å¤„ç†ç¨‹åºä¸­çš„ eventã€‚</li><li>sourceï¼šå‘ç”Ÿé”™è¯¯çš„è„šæœ¬ URLï¼ˆå­—ç¬¦ä¸²ï¼‰</li><li>linenoï¼šå‘ç”Ÿé”™è¯¯çš„è¡Œå·ï¼ˆæ•°å­—ï¼‰</li><li>colnoï¼šå‘ç”Ÿé”™è¯¯çš„åˆ—å·ï¼ˆæ•°å­—ï¼‰</li><li>errorï¼šError å¯¹è±¡ï¼ˆå¯¹è±¡ï¼‰</li></ul><p>è‹¥è¯¥å‡½æ•°è¿”å› <code>true</code>ï¼Œåˆ™é˜»æ­¢æ‰§è¡Œé»˜è®¤äº‹ä»¶å¤„ç†å‡½æ•°</p><h3 class="anchor anchorWithStickyNavbar_mojV" id="windowaddeventlistener">window.addEventListener<a class="hash-link" href="#windowaddeventlistener" title="Direct link to heading">â€‹</a></h3><p>å½“ä¸€é¡¹èµ„æºï¼ˆ<code>å¦‚&lt;img&gt;æˆ–&lt;script&gt;</code>ï¼‰åŠ è½½å¤±è´¥ï¼ŒåŠ è½½èµ„æºçš„å…ƒç´ ä¼šè§¦å‘ä¸€ä¸ª <code>Event</code> æ¥å£çš„ <code>error</code> äº‹ä»¶ï¼Œå¹¶æ‰§è¡Œè¯¥å…ƒç´ ä¸Šçš„ <code>onerror()</code>å¤„ç†å‡½æ•°ã€‚è¿™äº› <code>error</code> äº‹ä»¶ä¸ä¼šå‘ä¸Šå†’æ³¡åˆ° <code>window</code>ï¼Œä¸è¿‡ï¼ˆè‡³å°‘åœ¨ <code>Firefox</code> ä¸­ï¼‰èƒ½è¢«å•ä¸€çš„ <code>window.addEventListener</code> æ•è·ã€‚</p><div class="codeBlockContainer_I0IT language-js theme-code-block"><div class="codeBlockContent_wNvx js"><pre tabindex="0" class="prism-code language-js codeBlock_jd64 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain">scritp</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token dom variable" style="color:#36acaa">window</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">addEventListener</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&#x27;error&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token parameter">error</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token console class-name">console</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">log</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&#x27;æ•è·åˆ°å¼‚å¸¸ï¼š&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> error</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">true</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token operator" style="color:#393A34">&lt;</span><span class="token operator" style="color:#393A34">/</span><span class="token plain">script</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain">img src</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&quot;cxxxxx.img&quot;</span><span class="token operator" style="color:#393A34">&gt;</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div><p>ç”±äºç½‘ç»œè¯·æ±‚å¼‚å¸¸ä¸ä¼šäº‹ä»¶å†’æ³¡ï¼Œå› æ­¤å¿…é¡»åœ¨æ•è·é˜¶æ®µå°†å…¶æ•æ‰åˆ°æ‰è¡Œï¼Œä½†æ˜¯è¿™ç§æ–¹å¼è™½ç„¶å¯ä»¥æ•æ‰åˆ°ç½‘ç»œè¯·æ±‚çš„å¼‚å¸¸ï¼Œä½†æ˜¯æ— æ³•åˆ¤æ–­ <code>HTTP</code> çš„çŠ¶æ€æ˜¯ <code>404</code> è¿˜æ˜¯å…¶ä»–æ¯”å¦‚ <code>500</code> ç­‰ç­‰ï¼Œæ‰€ä»¥è¿˜éœ€è¦é…åˆæœåŠ¡ç«¯æ—¥å¿—æ‰è¿›è¡Œæ’æŸ¥åˆ†ææ‰å¯ä»¥ã€‚</p><h3 class="anchor anchorWithStickyNavbar_mojV" id="promise-catch">Promise Catch<a class="hash-link" href="#promise-catch" title="Direct link to heading">â€‹</a></h3><blockquote><p>åœ¨ promise ä¸­ä½¿ç”¨ catch å¯ä»¥éå¸¸æ–¹ä¾¿çš„æ•è·åˆ°å¼‚æ­¥ error</p></blockquote><p>æ²¡æœ‰å†™ <code>catch</code> çš„ <code>Promise</code> ä¸­æŠ›å‡ºçš„é”™è¯¯æ— æ³•è¢« <code>onerror</code> æˆ– <code>try-catch</code> æ•è·åˆ°ï¼Œæ‰€ä»¥åŠ¡å¿…è¦åœ¨ <code>Promise</code> ä¸­ä¸è¦å¿˜è®°å†™ <code>catch</code> å¤„ç†æŠ›å‡ºçš„å¼‚å¸¸ã€‚</p><p>è§£å†³æ–¹æ¡ˆï¼š ä¸ºäº†é˜²æ­¢æœ‰æ¼æ‰çš„ <code>Promise</code> å¼‚å¸¸ï¼Œå»ºè®®åœ¨å…¨å±€å¢åŠ ä¸€ä¸ªå¯¹ <code>unhandledrejection</code> çš„ç›‘å¬ï¼Œç”¨æ¥å…¨å±€ç›‘å¬ <code>Uncaught Promise Error</code>ã€‚ä½¿ç”¨æ–¹å¼ï¼š</p><div class="codeBlockContainer_I0IT language-js theme-code-block"><div class="codeBlockContent_wNvx js"><pre tabindex="0" class="prism-code language-js codeBlock_jd64 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token dom variable" style="color:#36acaa">window</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">addEventListener</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;unhandledrejection&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">function</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token parameter">e</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token console class-name">console</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">log</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">e</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div><h3 class="anchor anchorWithStickyNavbar_mojV" id="react-å¼‚å¸¸æ•è·">React å¼‚å¸¸æ•è·<a class="hash-link" href="#react-å¼‚å¸¸æ•è·" title="Direct link to heading">â€‹</a></h3><div class="codeBlockContainer_I0IT language-js theme-code-block"><div class="codeBlockContent_wNvx js"><pre tabindex="0" class="prism-code language-js codeBlock_jd64 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">componentDidCatch</span><span class="token punctuation" style="color:#393A34">(</span><span class="token parameter">error</span><span class="token parameter punctuation" style="color:#393A34">,</span><span class="token parameter"> info</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token console class-name">console</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">log</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">error</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> info</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div><p><code>error boundaries</code> å¹¶ä¸ä¼šæ•æ‰ä¸‹é¢è¿™äº›é”™è¯¯</p><ul><li>1.äº‹ä»¶å¤„ç†å™¨</li><li>2.å¼‚æ­¥ä»£ç </li><li>3.æœåŠ¡ç«¯çš„æ¸²æŸ“ä»£ç </li><li>4.åœ¨ error boundaries åŒºåŸŸå†…çš„é”™è¯¯</li></ul><p>åªæœ‰ <code>class</code> ç±»å‹çš„ç»„ä»¶(<code>class component</code> )å¯ä»¥æˆä¸ºä¸€ä¸ª <code>error boundaries</code> ã€‚</p><div class="codeBlockContainer_I0IT language-jsx theme-code-block"><div class="codeBlockContent_wNvx jsx"><pre tabindex="0" class="prism-code language-jsx codeBlock_jd64 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">class</span><span class="token plain"> </span><span class="token class-name">ErrorBoundary</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">extends</span><span class="token plain"> </span><span class="token class-name">React</span><span class="token class-name punctuation" style="color:#393A34">.</span><span class="token class-name">Component</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token function" style="color:#d73a49">constructor</span><span class="token punctuation" style="color:#393A34">(</span><span class="token parameter">props</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">super</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">props</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">this</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">state </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> </span><span class="token literal-property property" style="color:#36acaa">hasError</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">false</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token function" style="color:#d73a49">componentDidCatch</span><span class="token punctuation" style="color:#393A34">(</span><span class="token parameter">error</span><span class="token parameter punctuation" style="color:#393A34">,</span><span class="token parameter"> info</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">// Display fallback UI</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">this</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">setState</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> </span><span class="token literal-property property" style="color:#36acaa">hasError</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">true</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">// You can also log the error to an error reporting service</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token function" style="color:#d73a49">logErrorToMyService</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">error</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> info</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token function" style="color:#d73a49">render</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">if</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword" style="color:#00009f">this</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">state</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">hasError</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token comment" style="color:#999988;font-style:italic">// You can render any custom fallback UI</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token keyword" style="color:#00009f">return</span><span class="token plain"> </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">h1</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain-text">Something went wrong.</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">h1</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">return</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">this</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">props</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">children</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div><h3 class="anchor anchorWithStickyNavbar_mojV" id="vue-errorhandler">VUE errorHandler<a class="hash-link" href="#vue-errorhandler" title="Direct link to heading">â€‹</a></h3><div class="codeBlockContainer_I0IT language-js theme-code-block"><div class="codeBlockContent_wNvx js"><pre tabindex="0" class="prism-code language-js codeBlock_jd64 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token maybe-class-name">Vue</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">config</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method-variable function-variable method function property-access" style="color:#d73a49">errorHandler</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token parameter">err</span><span class="token parameter punctuation" style="color:#393A34">,</span><span class="token parameter"> vm</span><span class="token parameter punctuation" style="color:#393A34">,</span><span class="token parameter"> info</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token console class-name">console</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">error</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;é€šè¿‡vue errorHandleræ•è·çš„é”™è¯¯&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token console class-name">console</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">error</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">err</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token console class-name">console</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">error</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">vm</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token console class-name">console</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">error</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">info</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div><h3 class="anchor anchorWithStickyNavbar_mojV" id="try-catch">Try-Catch<a class="hash-link" href="#try-catch" title="Direct link to heading">â€‹</a></h3><p><code>try-catch</code> åªèƒ½æ•è·åˆ°åŒæ­¥çš„è¿è¡Œæ—¶é”™è¯¯ï¼Œå¯¹è¯­æ³•å’Œå¼‚æ­¥é”™è¯¯å´æ— èƒ½ä¸ºåŠ›ï¼Œæ•è·ä¸åˆ°ã€‚</p><p>ä¸èƒ½æ•è·åˆ°è¯­æ³•é”™è¯¯</p><p>ä¸èƒ½æ•è·åˆ°å¼‚æ­¥é”™è¯¯</p><h3 class="anchor anchorWithStickyNavbar_mojV" id="script-error">Script error<a class="hash-link" href="#script-error" title="Direct link to heading">â€‹</a></h3><p>èˆ¬æƒ…å†µï¼Œå¦‚æœå‡ºç° <code>Script error</code> è¿™æ ·çš„é”™è¯¯ï¼ŒåŸºæœ¬ä¸Šå¯ä»¥ç¡®å®šæ˜¯å‡ºç°äº†è·¨åŸŸé—®é¢˜ã€‚è¿™æ—¶å€™ï¼Œæ˜¯ä¸ä¼šæœ‰å…¶ä»–å¤ªå¤šè¾…åŠ©ä¿¡æ¯çš„ï¼Œä½†æ˜¯è§£å†³æ€è·¯æ— éå¦‚ä¸‹ï¼š
s
å½“åŠ è½½è‡ªä¸åŒåŸŸçš„è„šæœ¬ä¸­å‘ç”Ÿè¯­æ³•é”™è¯¯æ—¶ï¼Œä¸ºé¿å…ä¿¡æ¯æ³„éœ²ï¼ˆå‚è§ <code>bug 363897</code>ï¼‰ï¼Œè¯­æ³•é”™è¯¯çš„ç»†èŠ‚å°†ä¸ä¼šæŠ¥å‘Šï¼Œè€Œä»£ä¹‹ç®€å•çš„<code>&quot;Script error.&quot;</code>ã€‚åœ¨æŸäº›æµè§ˆå™¨ä¸­ï¼Œé€šè¿‡åœ¨<code>&lt;script&gt;</code>ä½¿ç”¨ <code>crossorigin</code> å±æ€§å¹¶è¦æ±‚æœåŠ¡å™¨å‘é€é€‚å½“çš„ C<code>ORS HTTP</code> å“åº”å¤´ï¼Œè¯¥è¡Œä¸ºå¯è¢«è¦†ç›–ã€‚ä¸€ä¸ªå˜é€šæ–¹æ¡ˆæ˜¯å•ç‹¬å¤„ç†&quot;<code>Script error.&quot;</code>ï¼Œå‘ŠçŸ¥é”™è¯¯è¯¦æƒ…ä»…èƒ½é€šè¿‡æµè§ˆå™¨æ§åˆ¶å°æŸ¥çœ‹ï¼Œæ— æ³•é€šè¿‡ <code>JavaScript</code> è®¿é—®ã€‚</p><div class="codeBlockContainer_I0IT language-js theme-code-block"><div class="codeBlockContent_wNvx js"><pre tabindex="0" class="prism-code language-js codeBlock_jd64 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain">script src</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&quot;http://jartto.wang/main.js&quot;</span><span class="token plain"> crossorigin</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token operator" style="color:#393A34">&lt;</span><span class="token operator" style="color:#393A34">/</span><span class="token plain">script</span><span class="token operator" style="color:#393A34">&gt;</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div><blockquote><p>æœåŠ¡å™¨ç«¯éœ€è¦è®¾ç½®ï¼šAccess-Control-Allow-Origin</p></blockquote><h3 class="anchor anchorWithStickyNavbar_mojV" id="å´©æºƒå’Œå¡é¡¿">å´©æºƒå’Œå¡é¡¿<a class="hash-link" href="#å´©æºƒå’Œå¡é¡¿" title="Direct link to heading">â€‹</a></h3><p>å¡é¡¿ä¹Ÿå°±æ˜¯ç½‘é¡µæš‚æ—¶å“åº”æ¯”è¾ƒæ…¢ï¼Œ <code>JS</code> å¯èƒ½æ— æ³•åŠæ—¶æ‰§è¡Œã€‚ä½†å´©æºƒå°±ä¸ä¸€æ ·äº†ï¼Œç½‘é¡µéƒ½å´©æºƒäº†ï¼Œ<code>JS</code> éƒ½ä¸è¿è¡Œäº†ï¼Œè¿˜æœ‰ä»€ä¹ˆåŠæ³•å¯ä»¥ç›‘æ§ç½‘é¡µçš„å´©æºƒï¼Œå¹¶å°†ç½‘é¡µå´©æºƒä¸ŠæŠ¥å‘¢ï¼Ÿ</p><ul><li>åˆ©ç”¨ window å¯¹è±¡çš„ load å’Œ beforeunload äº‹ä»¶å®ç°äº†ç½‘é¡µå´©æºƒçš„ç›‘æ§ã€‚</li></ul><div class="codeBlockContainer_I0IT language-js theme-code-block"><div class="codeBlockContent_wNvx js"><pre tabindex="0" class="prism-code language-js codeBlock_jd64 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token dom variable" style="color:#36acaa">window</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">addEventListener</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;load&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">function</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token dom variable" style="color:#36acaa">sessionStorage</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">setItem</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;good_exit&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;pending&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token function" style="color:#d73a49">setInterval</span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword" style="color:#00009f">function</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token dom variable" style="color:#36acaa">sessionStorage</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">setItem</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;time_before_crash&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">new</span><span class="token plain"> </span><span class="token class-name">Date</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">toString</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1000</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token dom variable" style="color:#36acaa">window</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">addEventListener</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;beforeunload&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">function</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token dom variable" style="color:#36acaa">sessionStorage</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">setItem</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;good_exit&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;true&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword control-flow" style="color:#00009f">if</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token dom variable" style="color:#36acaa">sessionStorage</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">getItem</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;good_exit&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">&amp;&amp;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token dom variable" style="color:#36acaa">sessionStorage</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">getItem</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;good_exit&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">!==</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;true&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic">/*</span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">        insert crash logging code here</span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">    */</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token function" style="color:#d73a49">alert</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token string" style="color:#e3116c">&quot;Hey, welcome back from your crash, looks like you crashed on: &quot;</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">+</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token dom variable" style="color:#36acaa">sessionStorage</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">getItem</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;time_before_crash&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div><ul><li>Service Worker æ¥å®ç°ç½‘é¡µå´©æºƒçš„ç›‘æ§ï¼š
<code>Service Worker</code> æœ‰è‡ªå·±ç‹¬ç«‹çš„å·¥ä½œçº¿ç¨‹ï¼Œä¸ç½‘é¡µåŒºåˆ†å¼€ï¼Œç½‘é¡µå´©æºƒäº†ï¼Œ<code>Service Worker</code> ä¸€èˆ¬æƒ…å†µä¸‹ä¸ä¼šå´©æºƒï¼›
<code>Service Worker</code> ç”Ÿå‘½å‘¨æœŸä¸€èˆ¬è¦æ¯”ç½‘é¡µè¿˜è¦é•¿ï¼Œå¯ä»¥ç”¨æ¥ç›‘æ§ç½‘é¡µçš„çŠ¶æ€ï¼›
ç½‘é¡µå¯ä»¥é€šè¿‡ <code>navigator.serviceWorker.controller.postMessage API</code> å‘æŒç®¡è‡ªå·±çš„ <code>SW</code> å‘é€æ¶ˆæ¯ã€‚</li></ul><h2 class="anchor anchorWithStickyNavbar_mojV" id="æ€»ç»“">æ€»ç»“<a class="hash-link" href="#æ€»ç»“" title="Direct link to heading">â€‹</a></h2><ul><li>1.å¯ç–‘åŒºåŸŸå¢åŠ  Try-Catch</li><li>2.å…¨å±€ç›‘æ§ JS å¼‚å¸¸ window.onerror</li><li>3.å…¨å±€ç›‘æ§é™æ€èµ„æºå¼‚å¸¸ window.addEventListener</li><li>4.æ•è·æ²¡æœ‰ Catch çš„ Promise å¼‚å¸¸ï¼šunhandledrejection</li><li>5.VUE errorHandler å’Œ React componentDidCatch</li><li>6.ç›‘æ§ç½‘é¡µå´©æºƒï¼šwindow å¯¹è±¡çš„ load å’Œ beforeunload</li><li>7.è·¨åŸŸ crossOrigin è§£å†³</li></ul><blockquote><p><a href="http://jartto.wang/2018/11/20/js-exception-handling/index.html" target="_blank" rel="noopener noreferrer">http://jartto.wang/2018/11/20/js-exception-handling/index.html</a></p><p><a href="https://developer.mozilla.org/zh-CN/docs/Web/API/GlobalEventHandlers/onerror" target="_blank" rel="noopener noreferrer">https://developer.mozilla.org/zh-CN/docs/Web/API/GlobalEventHandlers/onerror</a></p></blockquote></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-edit-meta-row row"><div class="col"><a href="https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/03-JavaScriptè¿›é˜¶/13-å‰ç«¯ç›‘æ§.md" target="_blank" rel="noreferrer noopener" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_dcUD" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_foO9"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/JavaScriptè¿›é˜¶/Promise"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Promise &amp; async/await ä½¿ç”¨</div></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/JavaScriptè¿›é˜¶/çº¯å‡½æ•°"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">å‡½æ•°å¼ç¼–ç¨‹</div></a></div></nav></div></div><div class="col col--3"><div class="tableOfContents_cNA8 thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#why" class="table-of-contents__link toc-highlight">why</a></li><li><a href="#å¼‚å¸¸" class="table-of-contents__link toc-highlight">å¼‚å¸¸</a></li><li><a href="#é”™è¯¯æœé›†" class="table-of-contents__link toc-highlight">é”™è¯¯æœé›†</a><ul><li><a href="#windowonerror" class="table-of-contents__link toc-highlight">window.onerror</a></li><li><a href="#windowaddeventlistener" class="table-of-contents__link toc-highlight">window.addEventListener</a></li><li><a href="#promise-catch" class="table-of-contents__link toc-highlight">Promise Catch</a></li><li><a href="#react-å¼‚å¸¸æ•è·" class="table-of-contents__link toc-highlight">React å¼‚å¸¸æ•è·</a></li><li><a href="#vue-errorhandler" class="table-of-contents__link toc-highlight">VUE errorHandler</a></li><li><a href="#try-catch" class="table-of-contents__link toc-highlight">Try-Catch</a></li><li><a href="#script-error" class="table-of-contents__link toc-highlight">Script error</a></li><li><a href="#å´©æºƒå’Œå¡é¡¿" class="table-of-contents__link toc-highlight">å´©æºƒå’Œå¡é¡¿</a></li></ul></li><li><a href="#æ€»ç»“" class="table-of-contents__link toc-highlight">æ€»ç»“</a></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="footer__bottom text--center"><div class="footer__copyright">Copyright Â© 2022 My FE-Study, Inc. Built with Docusaurus.</div></div></div></footer></div>
<script src="/assets/js/runtime~main.1b1c4256.js"></script>
<script src="/assets/js/main.621f5716.js"></script>
</body>
</html>